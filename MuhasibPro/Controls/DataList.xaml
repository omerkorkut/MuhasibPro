<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="MuhasibPro.Controls.DataList"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="using:MuhasibPro.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="400"
    d:DesignWidth="800">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--Toolbar-->
        <control:ListToolbar
            x:Name="toolbar"
            ButtonClick="{x:Bind ConfigControl.Command.OnToolbarClick}"
            DefaultCommands="{x:Bind ConfigControl.Command.DefaultCommands}"
            NewLabel="{x:Bind ConfigControl.CoreData.NewLabel, Mode=OneWay}"
            Query="{x:Bind ConfigControl.CoreData.Query, Mode=TwoWay}"
            QuerySubmitted="{x:Bind ConfigControl.CoreData.OnQuerySubmitted}"
            ToolbarMode="{x:Bind ConfigControl.Selection.ToolbarMode, Mode=OneWay}" />

        <!--List Content - ContentControl ile esnek yapı-->
        <Grid Grid.Row="1">
            <ContentControl
                x:Name="contentControl"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch"
                Content="{x:Bind ConfigControl.CoreData.ListContent, Mode=OneWay}" />

            <!--No Data Message - SADECE data yoksa görünecek-->
            <StackPanel
                Margin="0 30 0 0"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
                <FontIcon Glyph="&#xED1A;" FontSize="42" Visibility="{x:Bind ConfigControl.CoreData.IsDataUnavailable, Mode=OneWay}"  />
                <TextBlock Text="{x:Bind ConfigControl.CoreData.DataUnavailableMessage, Mode=OneWay}" Visibility="{x:Bind ConfigControl.CoreData.IsDataUnavailable, Mode=OneWay}" />
            </StackPanel>

        </Grid>

        <!--Footer-->
        <Grid Grid.Row="2" Visibility="{x:Bind ConfigControl.CoreData.IsDataAvailable, Mode=OneWay}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!--Toplam kayıt sayısı-->
            <TextBlock
                Grid.Column="0"
                Margin="4"
                VerticalAlignment="Center"
                FontSize="14"
                Opacity="0.75">
                <Run Text="Toplam:" />
                <Run FontWeight="SemiBold" Text="{x:Bind ConfigControl.Pagination.TotalItems, Mode=OneWay}" />
                <Run Text="kayıt" />
            </TextBlock>

            <!--Seçim bilgisi - Multi-selection modunda-->
            <StackPanel
                Grid.Column="1"
                Margin="10 3 0 0"
                Orientation="Vertical"
                Visibility="{x:Bind ConfigControl.Selection.IsMultipleSelection, Mode=OneWay}">

                <!--Seçilen öğe sayısı-->
                <TextBlock
                    Margin="7"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"
                    Opacity="0.75"
                    Text="{x:Bind ConfigControl.Selection.SelectionInfo, Mode=OneWay}" />

            </StackPanel>

            <!--Pagination Controls-->
            <StackPanel
                Grid.Column="2"
                Margin="4"
                Orientation="Horizontal"
                Spacing="8">

                <TextBlock
                    VerticalAlignment="Center"
                    FontSize="14"
                    Opacity="0.75"
                    Text="{x:Bind ConfigControl.Pagination.PaginationInfo, Mode=OneWay}" />

                <Button
                    Width="35"
                    Height="32"
                    Command="{x:Bind ConfigControl.Pagination.PreviousPageCommand}"
                    Content="&#xE76B;"
                    FontFamily="Segoe MDL2 Assets"
                    IsEnabled="{x:Bind ConfigControl.Pagination.CanGoToPreviousPage, Mode=OneWay}"
                    ToolTipService.ToolTip="Önceki Sayfa" />

                <ComboBox
                    x:Name="pageSizeComboBox"
                    MinWidth="80"
                    VerticalAlignment="Center" />

                <ComboBox
                    x:Name="pageComboBox"
                    MinWidth="80"
                    VerticalAlignment="Center" />

                <Button
                    Width="35"
                    Height="32"
                    Command="{x:Bind ConfigControl.Pagination.NextPageCommand}"
                    Content="&#xE76C;"
                    FontFamily="Segoe MDL2 Assets"
                    IsEnabled="{x:Bind ConfigControl.Pagination.CanGoToNextPage, Mode=OneWay}"
                    ToolTipService.ToolTip="Sonraki Sayfa" />
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>